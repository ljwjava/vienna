<?xml version="1.0" encoding="UTF-8" ?>
<declare>
	<product
		id="SHL00001"
		corporation_id="shlife"
		code="1025001"
		name="小蘑菇定期寿险"
		name_abbr="小蘑菇定寿"
		unit="1000"
		type_code="life"
		sequence="1000"
		sale_begin_date="2015-01-01"
		sale_end_date=""
		input="amount"
		last_modify_date="2017-01-01">

		<data>
			<item parser="dds" value="SHL00001" />
		</data>

		<param>
			<pay>
				<item code="term_10"/>
				<item code="term_20"/>
				<item code="term_30"/>
			</pay>
			<insure>
				<item code="term_20"/>
				<item code="term_30"/>
				<item code="to_60"/>
				<item code="to_70"/>
			</insure>
		</param>

		<init>
			<item name="ZONE_CITY" value="str(ZONE,0,4)+'00'"/>
			<item name="OCCUPATION_CODE" value="INSURANT.OCCUPATION_C"/>
		</init>

		<rule>
			<if condition="AGE lt 18 or AGE > 50" type="customer">
				投保年龄：18~50周岁
			</if>
			<if condition="AMOUNT lt 10000 or AMOUNT % 10000 > 0">
				最低投保基本保险金额：10000元，且需要为10000元的整数倍
			</if>
			<if condition="AGE >= 41 and PAY_VALUE == 30">
				大于40周岁时，不可选择30年交
			</if>
			<if condition="AGE >= 41 and INSURE_VALUE == 30">
				大于40周岁时，不可选择保30年
			</if>
			<if condition="AGE >= 41 and PAY_VALUE == 20 and INSURE_VALUE == 60">
				大于40周岁且20年交时，不可选择保至60周岁
			</if>
			<if condition="PAY_PERIOD > INSURE_PERIOD">
				交费期间不能长于保障期间
			</if>
			<if condition="ZONE == null" level="alert">
				请选择所在地区
			</if>
			<!--
			<if condition="INSURANT.OCCUPATION_L != null and (INSURANT.OCCUPATION_L lt 1 or INSURANT.OCCUPATION_L > 5)">
				职业要求必填且为1~5类
			</if>
			<if condition="PAY_PERIOD * PREMIUM >= 200000">
				累计总保费不能超过20万
			</if>
			<if condition="INSURANT.SOCIAL_INS == false">
				本产品仅支持有社保身份投保
			</if>
			-->
			<if>
				if (ZONE == null)
					return null;
				var lv = try(DS.ZONE_LEVEL[0][0], 3);
				if (OCCUPATION_CODE != '9901001' and INSURANT.SOCIAL_INS) {
					var max = APPLICANT.INCOME ? [300, 200, 100] : [200, 100, 50];
					if (lv == 1) {
						if (AMOUNT > 10000 * max[0]) {
							return '当前条件下，一类城市最高' + max[0] + '万有效保额';
						}
					} else if (lv == 2) {
						if (AMOUNT > 10000 * max[1]) {
							return '当前条件下，二类城市最高' + max[1] + '万有效保额';
						}
					} else {
						if (AMOUNT > 10000 * max[2]) {
							return '当前条件下，普通地区最高' + max[2] + '万有效保额';
						}
					}
					return null;
				} else {
					if (lv == 1) {
						if (AGE le 40 and AMOUNT > 1500000) {
							return '当前条件下，一类城市最高150万有效保额';
						} else if (AGE >= 41 and AMOUNT > 1000000) {
							return '当前条件下，一类城市最高100万有效保额';
						}
					} else if (lv == 2) {
						if (AGE le 40 and AMOUNT > 1000000) {
							return '当前条件下，二类城市最高100万有效保额';
						} else if (AGE >= 41 and AMOUNT > 500000) {
							return '当前条件下，二类城市最高50万有效保额';
						}
					} else {
						if (AMOUNT > 500000) {
							return '当前条件下，普通地区最高50万有效保额';
						}
					}
				}
				return null;
			</if>
		</rule>
	</product>
</declare>
